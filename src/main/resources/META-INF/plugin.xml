<idea-plugin>
    <id>dev.slne.surf.idea.surf-idea-plugin</id>
    <name>Surf Framework</name>
    <vendor url="https://github.com/SLNE-Development/">SLNE-Development</vendor>

    <description><![CDATA[
        Provides inspections, code generation, line markers, and framework detection
        for surf-api (Paper/Velocity/Core), surf-redis, and surf-database-r2dbc.
    ]]></description>

    <depends>com.intellij.modules.compose</depends>
    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.kotlin</depends>

    <resource-bundle>messages.SurfBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="MyToolWindow" factoryClass="dev.slne.surf.idea.surfideaplugin.MyToolWindowFactory"
                    icon="AllIcons.Toolwindows.ToolWindowPalette"/>

        <!-- Surf-API -->
        <facetType implementation="dev.slne.surf.idea.surfideaplugin.surfapi.facet.SurfApiFacetType"/>
        <framework.detector implementation="dev.slne.surf.idea.surfideaplugin.surfapi.facet.SurfApiFrameworkDetector"/>

        <!-- Surf-Redis -->
        <facetType implementation="dev.slne.surf.idea.surfideaplugin.redis.facet.SurfRedisFacetType"/>
        <framework.detector implementation="dev.slne.surf.idea.surfideaplugin.redis.facet.SurfRedisFrameworkDetector"/>

        <localInspection
                language="kotlin"
                groupPath="Surf framework"
                groupKey="inspection.redis.group.name"
                shortName="RedisEventMissingSerializable"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisEventMissingSerializableInspection"
                key="inspection.redis.event.missing.serializable.display.name"
        />
        <localInspection
                language="kotlin"
                groupPath="Surf framework"
                groupKey="inspection.redis.group.name"
                shortName="RedisHandlerSuspendFunction"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisHandlerSuspendInspection"
                key="inspection.redis.handler.suspend.function.display.name"
        />
        <localInspection
                language="kotlin"
                groupPath="Surf framework"
                groupKey="inspection.redis.group.name"
                shortName="RedisEventHandlerParameterInspection"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisEventHandlerParameterInspection"
                key="inspection.redis.event.handler.parameter.inspection.display.name"
        />
        <localInspection language="kotlin"
                         groupPath="Surf framework"
                         groupKey="inspection.redis.group.name"
                         shortName="RedisRequestHandlerParameterInspection"
                         enabledByDefault="true"
                         level="ERROR"
                         implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisRequestHandlerParameterInspection"
                         key="inspection.redis.request.handler.parameter.inspection.display.name"
        />
        <localInspection language="kotlin"
                         groupPath="Surf framework"
                         groupKey="inspection.redis.group.name"
                         shortName="RedisRequestHandlerParameterNameInspection"
                         enabledByDefault="true"
                         level="WARNING"
                         implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisRequestHandlerParameterNameInspection"
                         key="inspection.redis.request.handler.parameter.name.inspection.display.name"
        />
        <localInspection language="kotlin"
                         groupPath="Surf framework"
                         groupKey="inspection.redis.group.name"
                         shortName="RedisEventHandlerParameterNameInspection"
                         enabledByDefault="true"
                         level="WARNING"
                         implementationClass="dev.slne.surf.idea.surfideaplugin.redis.inspections.RedisEventHandlerParameterNameInspection"
                         key="inspection.redis.event.handler.parameter.name.inspection.display.name"
        />

        <implicitUsageProvider
                implementation="dev.slne.surf.idea.surfideaplugin.redis.references.RedisEventHandlerImplicitUsageProvider"/>
        <lang.inspectionSuppressor language="kotlin"
                                   implementationClass="dev.slne.surf.idea.surfideaplugin.redis.references.RedisEventHandlerInspectionSuppressor"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="dev.slne.surf.idea.surfideaplugin.redis.makers.RedisEventHandlerLineMarkerProvider"/>
    </extensions>


    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <supportsKotlinPluginMode supportsK2="true"/>
    </extensions>

    <actions>
        <action id="dev.slne.surf.idea.surfideaplugin.redis.generation.GenerateRedisEventHandlerCodeInsightAction"
                class="dev.slne.surf.idea.surfideaplugin.redis.generation.GenerateRedisEventHandlerCodeInsightAction"
                text="Generate Redis Event Handler">
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
        <action id="dev.slne.surf.idea.surfideaplugin.redis.generation.GenerateRedisRequestHandlerCodeInsightAction"
                class="dev.slne.surf.idea.surfideaplugin.redis.generation.GenerateRedisRequestHandlerCodeInsightAction"
                text="Generate Redis Request Handler" >
            <add-to-group group-id="GenerateGroup" anchor="last"/>
        </action>
    </actions>
</idea-plugin>